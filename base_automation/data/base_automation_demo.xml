<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="test_rule_on_create" model="base.automation">
        <field name="name">Test rule on create</field>
        <field name="trigger">on_create</field>
        <field name="state">create</field>
        <field name="filter_post">[('state', '=', 'draft')]</field>
        <field name="model_id" ref="base_automation.model_base_automation_lead_test"/>
        <field name="create_model_id" ref="base_automation.model_base_automation_lead_test"/>
        <field name="fields_lines" eval="[(0, 0, {'col1': ref('base_automation.field_base_automation_lead_test_value'),'type': 'value', 'value': 'init'}), 
        (0, 0, {'col1': ref('base_automation.field_base_automation_lead_test_name'),'type': 'value', 'value': 'new lead created'})]"/>
    </record>

    <record id="test_rule_on_write" model="base.automation">
        <field name="name">Test rule on write</field>
        <field name="trigger">on_write</field>
        <field name="state">write</field>
        <field name="filter_pre">[('state', '=', 'open')]</field>
        <field name="filter_post">[('state', '=', 'draft')]</field>
        <field name="model_id" ref="base_automation.model_base_automation_lead_test"/>
        <field name="fields_lines" eval="[(0, 0, {'col1': ref('base_automation.field_base_automation_lead_test_value'),'type': 'value', 'value': 'reinit'})]"/>
    </record>

    <record id="test_rule_on_recompute" model="base.automation">
        <field name="name">Test rule on recompute</field>
        <field name="trigger">on_write</field>
        <field name="state">write</field>
        <field name="filter_pre">[('state', '=', 'draft')]</field>
        <field name="filter_post">[('state', '=', 'open'), ('value','=','reinit')]</field>
        <field name="model_id" ref="base_automation.model_base_automation_lead_test"/>
        <field name="fields_lines" eval="[(0, 0, {'col1': ref('base_automation.field_base_automation_lead_test_state'),'type': 'value', 'value': 'done'})]"/>
    </record>

    <record id="test_rule_on_line" model="base.automation">
        <field name="name">Test rule on line</field>
        <field name="trigger">on_write</field>
        <field name="state">create</field>
        <field name="filter_pre">[('state', '=', 'open')]</field>
        <field name="filter_post">[('state', '=', 'done')]</field>
        <field name="model_id" ref="base_automation.model_base_automation_lead_test"/>
        <field name="create_model_id" ref="base_automation.model_base_automation_line_test"/>
        <field name="link_field_id" ref="base_automation.field_base_automation_line_test_lead_id"/>
        <field name="fields_lines" eval="[(0, 0, {'col1': ref('base_automation.field_base_automation_line_test_name'),'type': 'value', 'value': 'new'})]"/>
    </record>

</odoo>
