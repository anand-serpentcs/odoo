<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <div t-name="mass_mailing.theme_selector" class="o_mail_theme_selector">
        <a href="#" class="btn btn-sm o_mail_save_template_button o_mail_theme_selector_btn">
            <i class="fa fa-floppy-o mr4" aria-hidden="true"/> Save
        </a>
        <a href="#" class="btn btn-sm dropdown-toggle o_mail_theme_selector_btn" data-toggle="dropdown">
            <i class="fa fa-paint-brush mr4" aria-hidden="true"/> Change Style
        </a>
        <div class="o_mail_default_themes dropdown-menu">
            <li t-foreach="themes" t-as="theme">
                <a href="#">
                    <div class="o_thumb small"  t-attf-style="background-image: url(#{theme.img}_small.png)"/>
                    <div class="o_thumb large" t-attf-style="background-image: url(#{theme.img}_large.png)"/>
                    <div class="o_thumb logo" t-attf-style="background-image: url(#{theme.img}_logo.png)"/>
                </a>
            </li>
            <li t-if="themes.length === 1" class="o_mass_mailing_themes_upgrade">
                <a href="#">
                    <div class="o_thumb"><i class="fa fa-plus"/></div>
                </a>
            </li>
        </div>
    </div>
    <div t-name="mass_mailing.save_template_dialog" class="o_mail_save_template_dialog">
        <div class="form-horizontal">
            <t t-set="TemplateData" t-value="widget.savedTemplate.templateData"/>
            <t t-if="TemplateData.length">
                <div class="o_mail_save_template_dialog_radio">
                    <label class="radio-inline">
                        <input type="radio" name="template_option_radio" id="create_new_tmpl" checked="checked"/>Create New Template
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="template_option_radio" id="replace_existing_tmpl"/>Replace Existing Template
                    </label>
                </div>
            </t>
            <div class="form-group row o_mail_template_name_input mt4">
                <div class="col-xs-12">
                    <label class="control-label" for="template_name mb4">Template Name<sup> *</sup></label>
                    <div>
                        <input type="text" class="form-control mt4" name="template_name" placeholder="Enter Template Name" autocomplete="off"/>
                    </div>
                </div>
            </div>
            <t t-if="TemplateData.length">
                <div class="form-group o_mail_template_selector_dropdown mt8 hidden">
                    <div class="row">
                        <t t-set="selectedTemplate" t-value="False"/>
                        <div class= "col-xs-8 ml16">
                            <div class="o_mail_custom_template_selection">
                                <select class="form-control o_mail_template_selector">
                                    <t t-foreach="TemplateData" t-as="template">
                                        <option t-att-value="template.id" t-att-selected="template.id === widget.templateId ? 'selected' : None">
                                            <t t-esc="template.name"/><span t-if="template.id === widget.templateId or TemplateData[0].id === template.id"><t t-set="selectedTemplate" t-value="template"/> (Current)</span>
                                        </option>
                                    </t>
                                </select>
                            </div>
                        </div>
                        <div class="col-xs-3">
                            <div class="o_mail_selected_image_area">
                                <img t-att-src="'data:image/*;base64,' + selectedTemplate.image" class="o_template_dropdown_image"/>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </div>
    </div>
    <div t-name="mass_mailing.mailing_custom_templates" class="o_mail_custom_template_list hidden">
        <t t-set="is_user_template" t-value="true"/>
        <t t-set="templates" t-value="widget.userTemplates"/>
        <div class="o_mail_custom_theme_dropdown dropdown-menu">
            <t t-if="templates.length"><h4 class="text-center">Your Templates</h4></t>
            <li class="o_mass_mailing_themes_upgrade o_mail_create_new_template" title="Create a New Template.">
                <a href="#">
                    <div class="o_thumb"><i class="fa fa-plus"/></div>
                </a>
            </li>
            <t t-if="templates.length"><t t-call="mass_mailing.template_list"/></t>
            <t t-if="widget.otherTemplates.length">
                <div class="o_mail_others_saved_templates">
                    <h4 class="text-center">Other Templates</h4>
                    <t t-set="is_user_template" t-value="false"/>
                    <t t-set="templates" t-value="widget.otherTemplates"/>
                    <t t-call="mass_mailing.template_list"/>
                </div>
            </t>
        </div>
    </div>
    <t t-name="mass_mailing.template_list">
        <t t-foreach="templates" t-as="template">
            <li class="o_mail_custom_template_li" t-att-data-template_id="template.id" t-att-data-template_name="template.name"
                t-att-title="'Created by ' + template.create_uid[1] + ' on ' + template.create_date + '.' + '\n' + (template.write_date != template.create_date ? 'Last modified by ' + template.write_uid[1] + ' on ' + template.write_date + '.' : '')">
                <div class="o_mail_user_saved_templates">
                    <t t-if="widget.isManager || is_user_template">
                        <button class="btn btn-xs btn-danger o_mail_delete_template_btn"><i class="fa fa-times"/></button>
                    </t>
                    <a href="#">
                        <div class="o_mail_template_image o_thumb small"  t-attf-style="background-image: url(data:image/*;base64,{{template.image}})"/>
                        <div class="o_mail_template_image o_thumb large" t-attf-style="background-image: url(data:image/*;base64,{{template.image}})"/>
                        <div class="o_mail_template_image o_thumb logo" t-attf-style="background-image: url(data:image/*;base64,{{template.image}})"/>
                    </a>
                    <div class="o_mail_custom_template_name" t-att-contenteditable="(widget.isManager || is_user_template ? 'true' : 'false')"><t t-esc="template.name"/></div>
                </div>
                <div class="o_mail_custom_template_body_html hidden">
                    <t t-raw="template.body_html"/>
                </div>
            </li>
        </t>
    </t>
</templates>
